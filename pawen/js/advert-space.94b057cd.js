(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["advert-space"],{"1dde":function(e,t,n){var i=n("d039"),a=n("b622"),r=n("2d00"),o=a("species");e.exports=function(e){return r>=51||!i((function(){var t=[],n=t.constructor={};return n[o]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"44e7":function(e,t,n){var i=n("861d"),a=n("c6b6"),r=n("b622"),o=r("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==a(e))}},"5a34":function(e,t,n){var i=n("da84"),a=n("44e7"),r=i.TypeError;e.exports=function(e){if(a(e))throw r("The method doesn't accept regular expressions");return e}},"829f":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"file-add"},[n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[e._v("添加文件")])]),n("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px",rules:e.rules}},[n("el-form-item",{attrs:{label:"文件名称",prop:"name"}},[n("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),n("el-form-item",{attrs:{label:"是否公开"}},[n("el-switch",{model:{value:e.form.ispublic,callback:function(t){e.$set(e.form,"ispublic",t)},expression:"form.ispublic"}})],1),n("el-alert",{attrs:{title:"注:    目前文本文件只支持txt类型",type:"warning"}}),n("el-form-item",{attrs:{label:"文件类型",prop:"type"}},[n("el-radio-group",{model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[n("el-radio",{attrs:{label:"音频文件"}}),n("el-radio",{attrs:{label:"视频文件"}}),n("el-radio",{attrs:{label:"文本文件"}}),n("el-radio",{attrs:{label:"压缩包文件"}}),n("el-radio",{attrs:{label:"图片文件"}}),n("el-radio",{attrs:{label:"其他文件"}})],1)],1),n("el-form-item",{attrs:{label:"文件描述"}},[n("el-input",{attrs:{type:"textarea",autosize:{minRows:15,maxRows:15},resize:"none"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),n("el-form-item",[n("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{"on-change":e.handleChange,"before-remove":e.beforeRemove,data:e.upData,"auto-upload":!1,drag:"",action:"http://139.196.157.116:7788/Gsave/file/readFile","http-request":e.readFileHandler,files:e.fileList}},[n("i",{staticClass:"el-icon-upload"}),n("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),n("em",[e._v("点击上传")])]),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"})])],1),n("br"),n("br"),n("el-form-item",[n("el-button",{attrs:{type:"primary",loading:e.isLoginLoading},on:{click:e.onSubmit}},[e._v("立即创建")]),n("el-button",[e._v("取消")])],1)],1)],1)],1)},a=[],r=n("1da1"),o=(n("96cf"),n("ac1f"),n("00b4"),n("b0c0"),n("8a79"),n("99af"),n("b775")),s={name:"FileAdd",data:function(){var e=this,t=function(t,n,i){if(!n)return e.$message({message:"文件名称不能为空",type:"warning"}),i(new Error("文件名称不能为空"));setTimeout((function(){e.isValid2(n)?i():(e.$message({message:"文件名称只能由数字、字母和汉字组成",type:"warning"}),i(new Error("文件名称只能由数字、字母和汉字组成")))}),1e3)},n=function(t,n,i){if(!n)return e.$message({message:"请选择文件类型",type:"warning"}),i(new Error("请选择文件类型"));i()};return{form:{name:"",ispublic:!1,type:"",desc:""},file:null,isAdd:!1,fileList:[],rules:{type:[{validator:n,trigger:"blur"}],name:[{validator:t,trigger:"blur"}]},isLoginLoading:!1}},computed:{upData:function(){return this.form}},methods:{handleChange:function(e,t){console.log(this.file),this.fileList.push(e),this.isAdd=!0},beforeRemove:function(e,t){this.fileList.pop(),this.isAdd=!1},isValid2:function(e){return/^(\w|[\u4E00-\u9FA5])*$/.test(e)},readFileHandler:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(console.log(e),t.isLoginLoading=!0,t.judgeFile(e.file.name,t.form.type)){n.next=7;break}return t.isLoginLoading=!1,t.$message({message:"上传文件与所选类型不匹配",type:"warning"}),window.setTimeout((function(){window.location.reload()}),500),n.abrupt("return");case 7:return i=new FormData,i.append("file",e.file),i.append("name",t.form.name),i.append("ispublic",t.form.ispublic),i.append("type",t.form.type),i.append("desc",t.form.desc),i.append("pid",t.$store.state.userId),i.append("time",e.file.lastModifiedDate),i.append("size",e.file.size),console.log(e.file),t.isLoginLoading=!0,n.next=20,Object(o["a"])({method:"post",url:"http://139.196.157.116:7788/Gsave/file/uploadFile",data:i}).then((function(e){2e4==e.data.code&&(t.$message.success("添加文件成功"),t.$router.push({name:"file"}))}));case 20:t.isLoginLoading=!1;case 21:case"end":return n.stop()}}),n)})))()},judgeFile:function(e,t){return e=e.toLowerCase(),"音频文件"==t?e.endsWith("mid")||e.endsWith("wav")||e.endsWith("mp1")||e.endsWith("mp2")||e.endsWith("mp3")||e.endsWith("mp4")||e.endsWith("aif"):"视频文件"==t?e.endsWith("mp4")||e.endsWith("avi")||e.endsWith("mov")||e.endsWith("asf")||e.endsWith("rm")||e.endsWith("navi")||e.endsWith("mpg"):"文本文件"==t?e.endsWith("txt"):"压缩包文件"==t?e.endsWith("rar")||e.endsWith("zip")||e.endsWith("jar")||e.endsWith("war")||e.endsWith("arj")||e.endsWith("tar")||e.endsWith("gz"):"图片文件"==t?e.endsWith("bmp")||e.endsWith("gif")||e.endsWith("jpg")||e.endsWith("png"):"其他文件"==t||void 0},onSubmit:function(){var e=this;this.isLoginLoading=!0,this.$refs.form.validate((function(t){if(!t)return e.isLoginLoading=!1,console.log("error submit!!"),!1;console.log(e.isAdd),0!=e.fileList.length||e.isAdd||(e.isLoginLoading=!1,e.$message({message:"未选择文件",type:"warning"})),console.log("yyyyyyyy"),e.$refs.upload.submit()}))},handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},handleExceed:function(e,t){this.$message.warning("当前限制选择 3 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))}}},l=s,d=n("2877"),c=Object(d["a"])(l,i,a,!1,null,null,null);t["default"]=c.exports},"8a79":function(e,t,n){"use strict";var i=n("23e7"),a=n("e330"),r=n("06cf").f,o=n("50c4"),s=n("577e"),l=n("5a34"),d=n("1d80"),c=n("ab13"),u=n("c430"),f=a("".endsWith),p=a("".slice),m=Math.min,h=c("endsWith"),g=!u&&!h&&!!function(){var e=r(String.prototype,"endsWith");return e&&!e.writable}();i({target:"String",proto:!0,forced:!g&&!h},{endsWith:function(e){var t=s(d(this));l(e);var n=arguments.length>1?arguments[1]:void 0,i=t.length,a=void 0===n?i:m(o(n),i),r=s(e);return f?f(t,r,a):p(t,a-r.length,a)===r}})},"99af":function(e,t,n){"use strict";var i=n("23e7"),a=n("da84"),r=n("d039"),o=n("e8b5"),s=n("861d"),l=n("7b0b"),d=n("07fa"),c=n("8418"),u=n("65f0"),f=n("1dde"),p=n("b622"),m=n("2d00"),h=p("isConcatSpreadable"),g=9007199254740991,b="Maximum allowed index exceeded",v=a.TypeError,w=m>=51||!r((function(){var e=[];return e[h]=!1,e.concat()[0]!==e})),y=f("concat"),W=function(e){if(!s(e))return!1;var t=e[h];return void 0!==t?!!t:o(e)},x=!w||!y;i({target:"Array",proto:!0,forced:x},{concat:function(e){var t,n,i,a,r,o=l(this),s=u(o,0),f=0;for(t=-1,i=arguments.length;t<i;t++)if(r=-1===t?o:arguments[t],W(r)){if(a=d(r),f+a>g)throw v(b);for(n=0;n<a;n++,f++)n in r&&c(s,f,r[n])}else{if(f>=g)throw v(b);c(s,f++,r)}return s.length=f,s}})},ab13:function(e,t,n){var i=n("b622"),a=i("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[a]=!1,"/./"[e](t)}catch(i){}}return!1}},b0c0:function(e,t,n){var i=n("83ab"),a=n("5e77").EXISTS,r=n("e330"),o=n("9bf2").f,s=Function.prototype,l=r(s.toString),d=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,c=r(d.exec),u="name";i&&!a&&o(s,u,{configurable:!0,get:function(){try{return c(d,l(this))[1]}catch(e){return""}}})},caea:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"advert-space"},[e._v("广告位管理")])},a=[],r={name:"AdvertSpaceIndex"},o=r,s=n("2877"),l=Object(s["a"])(o,i,a,!1,null,"49a74b36",null);t["default"]=l.exports}}]);
//# sourceMappingURL=advert-space.94b057cd.js.map